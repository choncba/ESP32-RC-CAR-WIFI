<!DOCTYPE HTML>
<html>
<head>
  <title>ESP Web Server</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="data:,">
  <style></style>
<title>ESP Web Server</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="icon" type="image/png" href="favicon.png">
<link rel="stylesheet" href="ws-server.css">
<script src="ws-server.js"></script>
<script src="joy.js"></script>
</head>
<body>
  <div class="topnav">
    <h1>ESP WebSocket Server</h1>
  </div>
  <div class="content">
    <div class="card">
      <h2>Output - GPIO 8</h2>
      <p class="state">state: <span id="state">%STATE%</span></p>
      <p><button id="button" class="button">Toggle</button></p>
    </div>
    <br>
    <div class="card">
      <h2>Direcci√≥n</h2>
      <h3 id="sliderDirValue"></h3>
      <div class="slidecontainer">
        <input type="range" min="-100" max="100" value="0" class="slider" id="sliderDir">
      </div>
      <h2>Sentido</h2>
      <h3 id="sliderSentValue"></h3>
      <div class="slidecontainer">
        <input type="range" min="-100" max="100" value="0" class="slider" id="sliderSent">
      </div>
    </div>
    <br>
    <div class="card card-h">
      <div id="joyDiv" style="width:200px;height:200px;"></div>
      <!-- <div style="position:fixed;bottom:125px;left:750px;"> -->
      <div>
        X Position:<input id="joyPosX" type="text" /><br />
        Y Position:<input id="joyPosY" type="text" /><br />
        Direction:<input id="joyDir" type="text" /><br />
        X :<input id="joyX" type="text" /></br>
        Y :<input id="joyY" type="text" />
      </div>
    </div>
  </div>
  <script type="text/javascript">
    var Joy = new JoyStick('joyDiv');
    
    var joyInputPosX = document.getElementById("joyPosX");
    var joyInputPosY = document.getElementById("joyPosY");
    var joyDirection = document.getElementById("joyDir");
    var joyX = document.getElementById("joyX");
    var joyY = document.getElementById("joyY");
    
    setInterval(function(){ joyInputPosX.value=Joy.GetPosX(); }, 50);
    setInterval(function(){ joyInputPosY.value=Joy.GetPosY(); }, 50);
    setInterval(function(){ joyDirection.value=Joy.GetDir(); }, 50);
    setInterval(function(){ joyX.value=Joy.GetX(); }, 50);
    setInterval(function(){ joyY.value=Joy.GetY(); }, 50);

    // Sliders
    var sliderDir = document.getElementById("sliderDir");
    var outputDir = document.getElementById("sliderDirValue");
    outputDir.innerHTML = sliderDir.value;
    sliderDir.oninput = function() { outputDir.innerHTML = this.value; }

    var sliderSent = document.getElementById("sliderSent");
    var outputSent = document.getElementById("sliderSentValue");
    outputSent.innerHTML = sliderSent.value;
    sliderSent.oninput = function() { outputSent.innerHTML = this.value; }
  </script>
</body>
</html>